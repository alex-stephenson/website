"0","convertToCommonFormat <- function(df=NA, x=NA, source, file, idx=NA) {"
"0","  if (is.na(x)) x <- df[[source]]"
"0","  if (is.null(x)) return("
"0","                    tibble("
"0","                      FileName=character(), "
"0","                      Source=character(), "
"0","                      Index=NA_integer_"
"0","                    )"
"0","                  )"
"0","  if (is.data.frame(x)) {"
"0","    # Using tibble rather than dataframe simply for ease of printing"
"0","    return("
"0","      as_tibble("
"0","        x %>% add_column("
"0","                FileName=file, "
"0","                Source=source, "
"0","                Index=idx, "
"0","                .before=1"
"0","              )"
"0","      )"
"0","    )"
"0","  } else if (is.list(x)) {"
"0","    return("
"0","      bind_rows("
"0","        lapply("
"0","          1:length(x), "
"0","          function(y) convertToCommonFormat(x=x[[y]], idx=y, file=file, source=source)"
"0","        )"
"0","      )"
"0","    )"
"0","  } else {"
"0","    print(x)"
"0","    stop(paste0(""Don't know what to do with "", str(x)))"
"0","  }"
"0","}"
"0",""
"0","processOneFile <- function(gpxFile) {"
"0","  df <- readGPX(gpxFile)"
"0","  tracks <- convertToCommonFormat(df, source=""tracks"", file=gpxFile)"
"0","  return(bind_rows(tracks))"
"0","}"
"0",""
